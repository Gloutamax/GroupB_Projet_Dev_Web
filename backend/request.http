# -- TEST DES ROUTES PAR DEFAUT --
# Test de la route get par défaut
GET http://localhost:3000/

###

# Test de la route post par défaut
POST http://localhost:3000/
Content-Type: application/json

{
    "message": "Hello, World!"
}

###
POST http://localhost:3000/
Content-Type: application/x-www-form-urlencoded

username=testuser&email=testuser@example.com

###
POST http://localhost:3000/
Content-Type: application/xml

<user>
    <username>exampleuser</username>
    <password>examplepass</password>
</user>

###

# -- TEST DES ROUTES UTILISATEURS --
# Test de la route get pour récupérer tous les utilisateurs (401 car pas d'authentification)
GET http://localhost:3000/users

###
# Test de la route post pour créer un nouvel utilisateur
POST http://localhost:3000/users
Content-Type : application/json

{
    "id": 1,
    "username": "admin",
    "email": "admin@example.com",
    "password": "AdminPass123!",
    "role": "ADMIN"
}

###
# Se connecter et récupérer le token JWT pour le compte admin
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "admin@example.com",
    "password": "AdminPass123!"
}

###

# Se connecter et récupérer le token JWT pour le compte utilisateur
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "jdaub@gmail.com",
    "password": "StrongPassword1!"
}

###
# Utiliser le token pour accéder aux routes protégées 
GET http://localhost:3000/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJpYXQiOjE3NjQ4MzQ0MTZ9.wco0V_1HIutz2DtVGECitB8ehMgGDgiAJ9qsNxAr_3w

###
# Test de la route get pour récupérer tous les utilisateurs (interdit pour les USER => 403 Forbidden)
GET http://localhost:3000/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

###
# Test de la route get sans authentification (=> 401 Unauthorized)
GET http://localhost:3000/users

### ==> RETURN 422
POST http://localhost:3000/users
Content-Type: application/json

{
    "username": "testuser",
    "email": "testuser@example.com"
}

### ==> RETURN 422 - Email manquant
POST http://localhost:3000/users
Content-Type: application/json

{
    "username": "testuser"
}

### ==> RETURN 422 - Password manquant
POST http://localhost:3000/users
Content-Type: application/json

{
    "username": "testuser",
    "email": "testuser@example.com"
}

### ==> RETURN 422 - Email invalide
POST http://localhost:3000/users
Content-Type: application/json

{
    "username": "testuser",
    "email": "invalidemail",
    "password": "test123"
}

### ==> RETURN 201 - Création réussie
POST http://localhost:3000/users
Content-Type: application/json

{
    "username": "testuser",
    "email": "testuser@example.com",
    "password": "Test123!@#"
}
###
# Creation de l'utilisateur avec l'ID 2 (utilisateur) pour les tests suivants
POST http://localhost:3000/users
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJpYXQiOjE3NjQ4MzQ0MTZ9.wco0V_1HIutz2DtVGECitB8ehMgGDgiAJ9qsNxAr_3w

{
    "id": 1,
    "username": "jdaub",
    "email": "jdaub@gmail.com",
    "password": "StrongPassword1!"
}

###
# Test de la route get pour récupérer un utilisateur par ID (avec le même ID de l'utilisateur qui souhaite voir ces données)
GET http://localhost:3000/users/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

###

# Vérifier qu'un utilisateur connecté ne peut pas voir les données d'un autre utilisateur (interdit pour les USER => 403 Forbidden)
GET http://localhost:3000/users/3
Authorization : Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

###
# Test de la route put pour mettre à jour un utilisateur par ID
PATCH http://localhost:3000/users/1
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

{
    "username": "daubj",
    "email": "daubj@gmail.com"
}

###

# Tentative de mise à jour d'un autre utilisateur (interdit pour les USER => 403 Forbidden) 
PATCH http://localhost:3000/users/3
Content-Type: application/Json
Authorization : Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

{ 
    "username": "otheruser",
    "email": "otheruser@example.com"
}

###
# Test de la route delete pour supprimer un utilisateur par ID
DELETE http://localhost:3000/users/1

###
GET http://localhost:3000/reservations

###
POST http://localhost:3000/reservations
Content-Type: application/json

{
    "userId": 5,
    //"materielId": 2,
    "title": "Reservation Test",
    "description": "This is a test reservation",
    "startDate": "2025-12-05T10:00:00Z",
    "endDate": "2025-12-05T10:00:00Z"
}

###
PATCH http://localhost:3000/reservations/10
Content-Type: application/json

{
    "title": "Updated Reservation Test",
    "description": "This is an updated test reservation"
}

###
DELETE http://localhost:3000/reservations/10
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

###
# Tentative de suppression d'un autre utilisateur (interdit pour les USER => 403 Forbidden)
DELETE http://localhost:3000/users/3
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJpYXQiOjE3NjQ4NDI5NDh9.IrKRw_ScFsLZj1TcHgEsE4BXH0Ca3AM2nJdRWWx53QY

###
# Inscription publique (sans authentification)
POST http://localhost:3000/signup
Content-Type: application/json

{
    "username": "newuser",
    "email": "newuser@example.com",
    "password": "SecurePass123!"
}

###
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "newuser@example.com",
    "password": "SecurePass123!"
}

###

# Tentative d'inscription en tant qu'admin (le rôle sera ignoré et forcé à USER)
POST http://localhost:3000/signup
Content-Type: application/json

{
    "username": "hacker",
    "email": "hacker@example.com",
    "password": "HackPass123!",
    "role": "ADMIN"
}

###
POST http://localhost:3000/login
Content-Type: application/json

{
    "email": "hacker@example.com",
    "password": "HackPass123!"
}

###
# Vérifier que l'utilisateur "hacker" n'a pas les droits d'admin
GET http://localhost:3000/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozNywiaWF0IjoxNzY1MTM1NjUyfQ.6mzOWDJCmpyy1-nv8J_HpyL343pH18zpaXtKSKX3p-4
